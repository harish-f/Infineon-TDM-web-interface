(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2264:function(e,t,s){Promise.resolve().then(s.bind(s,4515))},4515:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(7437),i=s(2265),n=s(6648),c={src:"/_next/static/media/right-arrow.795a38f3.svg",height:800,width:800,blurWidth:0,blurHeight:0};let l=["Unkown Tamper Cause","Phone Lid Removed","BMS Disconnect","Battery Disconnected"];function r(e){let{tamperEvents:t,tamperTypes:s}=e,[r,o]=(0,i.useState)(!0);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-row mb-5 gap-3 w-fit mx-auto cursor-pointer",onClick:()=>{o(e=>!e)},children:[(0,a.jsx)(n.default,{src:c,className:"w-5 fill-white",style:{transform:r?"rotate(270deg)":"rotate(90deg)"}}),(0,a.jsx)("p",{className:"text-xl font-bold",children:"Tamper History"})]}),r?(0,a.jsxs)("table",{className:"mx-auto",children:[(0,a.jsxs)("tr",{className:"font-semibold",children:[(0,a.jsx)("th",{children:"Timestamp"}),(0,a.jsx)("th",{}),(0,a.jsx)("th",{children:"Cause"})]}),t.map((e,t)=>(0,a.jsxs)("tr",{className:"text-center text-lg",children:[(0,a.jsx)("td",{className:"mr-5",children:e.toLocaleString()}),(0,a.jsx)("td",{className:"w-5"}),(0,a.jsx)("td",{children:l[s[t]]})]},t))]}):(0,a.jsx)(a.Fragment,{})]})}var o={src:"/_next/static/media/ble-connected.16183cf9.svg",height:800,width:800,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/ble-disconnected.d853ba60.svg",height:800,width:800,blurWidth:0,blurHeight:0};function m(){var e,t,s,c;let[l,m]=(0,i.useState)(0),[x,h]=(0,i.useState)([]),[u,b]=(0,i.useState)([0]),[w,f]=(0,i.useState)(!1),g=async e=>{m(e.target.value.getUint16(0,1));let a=await t.readValue();b(new Uint8Array((await s.readValue()).buffer).slice(1)),a.setUint32(0,4294967296-1,!0);let i=new Uint32Array(a.buffer);var n=[];for(let e=0;e<20&&0!=i[e];e++)n.push(new Date(1e3*i[e]-288e5));h(n.slice(1))},j=async()=>{c=await navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["cd327be0-eb57-42ac-8b17-bc919b162bbb"]});let a=await c.gatt.connect(),i=await a.getPrimaryService("cd327be0-eb57-42ac-8b17-bc919b162bbb");f(a.connected);let n=await i.getCharacteristics();e=await n[0],t=await n[1],s=await n[2],e.startNotifications(),n[0].startNotifications(),n[0].addEventListener("characteristicvaluechanged",g),m((await n[0].readValue()).getUint16(0,1))};return(0,a.jsxs)("div",{className:"flex flex-col bg-[#021526] min-h-screen text-[#d9dcde]",children:[(0,a.jsxs)("div",{className:" flex flex-row w-screen",children:[(0,a.jsx)("img",{className:"w-1/4 sm:w-1/6 md:w-[9vw] object-contain mx-10 mt-5 mr-auto",src:"https://www.pmc.sg/wp-content/uploads/2018/11/sst.png",alt:"SST Logo"}),(0,a.jsx)("img",{className:"w-1/4 sm:w-1/6 md:w-[12vw] object-contain mx-10 mt-5",src:"https://www.logo.wine/a/logo/Infineon_Technologies/Infineon_Technologies-Logo.wine.svg",alt:"Infineon Logo"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-col text-center mb-8 w-screen",children:[(0,a.jsx)("p",{className:"text-2xl md:text-4xl mb-10 font-semibold",children:"Tamper Instances Detected"}),(0,a.jsx)("p",{className:"text-6xl m-5",children:l}),(0,a.jsxs)("div",{className:"grid grid-cols-3 mx-auto mt-10 mb-3",children:[(0,a.jsx)("div",{}),(0,a.jsx)("button",{onClick:j,className:"w-fit rounded-2xl px-7 h-16 text-[#000] font-semibold text-xl bg-[#b7b7b7]",children:"Connect to TDM"}),(0,a.jsx)("div",{className:"w-12 h-12 ml-5 my-auto rounded-full flex",style:{backgroundColor:"#b7b7b7"},children:(0,a.jsx)(n.default,{className:"w-7 m-auto",src:w?o:d})})]})]}),l>0?(0,a.jsx)(r,{tamperEvents:x,tamperTypes:u}):(0,a.jsx)(a.Fragment,{})]}),(0,a.jsx)("div",{className:"h-20"})]})}}},function(e){e.O(0,[648,971,23,744],function(){return e(e.s=2264)}),_N_E=e.O()}]);